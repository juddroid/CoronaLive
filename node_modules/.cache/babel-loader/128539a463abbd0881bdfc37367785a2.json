{"ast":null,"code":"import { deepMergedCopy, omit } from \"../helpers/utils\";\nimport { getNestedPieChartAliasNames, hasNestedPieSeries, hasOuterDataLabel, hasOuterPieSeriesName } from \"../helpers/pieSeries\";\nimport { makeAxisTitleTheme, defaultSeriesTheme, getDefaultTheme } from \"../helpers/theme\";\n\nfunction getCommonSeriesOptions(options, series, isNestedPieChart) {\n  var _a, _b;\n\n  const theme = (_a = options) === null || _a === void 0 ? void 0 : _a.theme;\n\n  if (!((_b = theme) === null || _b === void 0 ? void 0 : _b.series)) {\n    return {};\n  }\n\n  const seriesNames = isNestedPieChart ? getNestedPieChartAliasNames(series) : Object.keys(series);\n  return seriesNames.reduce((acc, seriesName) => {\n    delete acc[seriesName];\n    return acc;\n  }, Object.assign({}, theme.series));\n}\n\nfunction getThemeAppliedSecondaryYAxis(options) {\n  var _a, _b, _c;\n\n  const theme = Object.assign({}, options.theme);\n\n  if (!Array.isArray(theme.yAxis)) {\n    return theme;\n  }\n\n  const axisTitleTheme = makeAxisTitleTheme((_c = (_b = (_a = options) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.chart) === null || _c === void 0 ? void 0 : _c.fontFamily);\n  const yAxis = theme.yAxis.map(yAxisTheme => deepMergedCopy({\n    title: Object.assign({}, axisTitleTheme)\n  }, Object.assign({}, yAxisTheme)));\n  return Object.assign(Object.assign({}, theme), {\n    yAxis\n  });\n}\n\nfunction getThemeOptionsWithSeriesName(options, series, commonSeriesOptions, isNestedPieChart) {\n  var _a;\n\n  const theme = getThemeAppliedSecondaryYAxis(options);\n\n  if (!((_a = theme) === null || _a === void 0 ? void 0 : _a.series)) {\n    return Object.assign({}, theme);\n  }\n\n  const seriesTheme = Object.assign(Object.assign({}, theme), {\n    series: {}\n  });\n  const seriesNames = Object.keys(series);\n  const isComboChart = seriesNames.length > 1;\n\n  if (isNestedPieChart) {\n    const aliasNames = getNestedPieChartAliasNames(series);\n    seriesTheme.series = {\n      pie: aliasNames.reduce((acc, aliasName) => {\n        var _a;\n\n        return Object.assign(Object.assign({}, acc), {\n          [aliasName]: deepMergedCopy((_a = theme.series) === null || _a === void 0 ? void 0 : _a[aliasName], omit(commonSeriesOptions, 'colors'))\n        });\n      }, {})\n    };\n  } else if (isComboChart) {\n    seriesTheme.series = Object.assign({}, seriesNames.reduce((acc, seriesName) => {\n      var _a;\n\n      return Object.assign(Object.assign({}, acc), {\n        [seriesName]: deepMergedCopy((_a = theme.series) === null || _a === void 0 ? void 0 : _a[seriesName], omit(commonSeriesOptions, 'colors'))\n      });\n    }, {}));\n  } else {\n    seriesTheme.series = {\n      [seriesNames[0]]: theme.series\n    };\n  }\n\n  return seriesTheme;\n}\n\nfunction setColors(theme, series, commonSeriesOptions, isNestedPieChart) {\n  var _a, _b;\n\n  let index = 0;\n  const commonColorsOption = [...(_b = (_a = commonSeriesOptions) === null || _a === void 0 ? void 0 : _a.colors, _b !== null && _b !== void 0 ? _b : []), ...defaultSeriesTheme.colors];\n  const themeNames = isNestedPieChart ? getNestedPieChartAliasNames(series) : Object.keys(series);\n  themeNames.forEach((name, idx) => {\n    var _a;\n\n    const size = isNestedPieChart ? series.pie[idx].data.length : series[name].length;\n    const target = isNestedPieChart ? theme.series.pie : theme.series;\n\n    if (!((_a = target[name]) === null || _a === void 0 ? void 0 : _a.colors)) {\n      target[name] = Object.assign(Object.assign({}, target[name]), {\n        colors: commonColorsOption.slice(index, index + size)\n      });\n      index += size;\n    }\n  });\n}\n\nfunction setPlot(theme) {\n  ['vertical', 'horizontal'].reduce((acc, cur) => {\n    if (!acc[cur]) {\n      acc[cur] = {\n        lineColor: acc.lineColor\n      };\n    }\n\n    return acc;\n  }, theme.plot);\n}\n\nfunction checkAnchorPieSeriesOption(options, series, alias) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n\n  return {\n    hasOuterAnchor: !!series.pie && ((_d = (_c = (_b = (_a = options) === null || _a === void 0 ? void 0 : _a.series) === null || _b === void 0 ? void 0 : _b[alias]) === null || _c === void 0 ? void 0 : _c.dataLabels) === null || _d === void 0 ? void 0 : _d.anchor) === 'outer',\n    hasOuterAnchorPieSeriesName: !!series.pie && ((_j = (_h = (_g = (_f = (_e = options) === null || _e === void 0 ? void 0 : _e.series) === null || _f === void 0 ? void 0 : _f[alias]) === null || _g === void 0 ? void 0 : _g.dataLabels) === null || _h === void 0 ? void 0 : _h.pieSeriesName) === null || _j === void 0 ? void 0 : _j.anchor) === 'outer'\n  };\n}\n\nfunction getTheme(options, series) {\n  var _a, _b, _c;\n\n  const isNestedPieChart = hasNestedPieSeries(series);\n  const commonSeriesOptions = getCommonSeriesOptions(options, series, isNestedPieChart);\n  let pieSeriesOuterAnchors = {\n    hasOuterAnchor: hasOuterDataLabel(options, series),\n    hasOuterAnchorPieSeriesName: hasOuterPieSeriesName(options, series)\n  };\n\n  if (isNestedPieChart) {\n    const aliasNames = getNestedPieChartAliasNames(series);\n    pieSeriesOuterAnchors = aliasNames.reduce((acc, cur) => Object.assign(Object.assign({}, acc), {\n      [cur]: checkAnchorPieSeriesOption(options, series, cur)\n    }), {});\n  }\n\n  const globalFontFamily = (_c = (_b = (_a = options) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.chart) === null || _c === void 0 ? void 0 : _c.fontFamily;\n  const theme = deepMergedCopy(getDefaultTheme(globalFontFamily, series, pieSeriesOuterAnchors, isNestedPieChart), getThemeOptionsWithSeriesName(options, series, commonSeriesOptions, isNestedPieChart));\n\n  if (!series.heatmap) {\n    setColors(theme, series, commonSeriesOptions, isNestedPieChart);\n  }\n\n  setPlot(theme);\n  return theme;\n}\n\nconst theme = {\n  name: 'theme',\n  state: ({\n    options,\n    series\n  }) => ({\n    theme: getTheme(options, series)\n  }),\n  action: {\n    initThemeState({\n      state,\n      initStoreState\n    }) {\n      state.theme = getTheme(state.options, initStoreState.series);\n    }\n\n  },\n  observe: {\n    updateTheme() {\n      this.dispatch('initThemeState');\n    }\n\n  }\n};\nexport default theme;","map":{"version":3,"sources":["/Users/raccoon/Desktop/fe-w6-free-style/node_modules/@toast-ui/chart/dist/esm/store/theme.js"],"names":["deepMergedCopy","omit","getNestedPieChartAliasNames","hasNestedPieSeries","hasOuterDataLabel","hasOuterPieSeriesName","makeAxisTitleTheme","defaultSeriesTheme","getDefaultTheme","getCommonSeriesOptions","options","series","isNestedPieChart","_a","_b","theme","seriesNames","Object","keys","reduce","acc","seriesName","assign","getThemeAppliedSecondaryYAxis","_c","Array","isArray","yAxis","axisTitleTheme","chart","fontFamily","map","yAxisTheme","title","getThemeOptionsWithSeriesName","commonSeriesOptions","seriesTheme","isComboChart","length","aliasNames","pie","aliasName","setColors","index","commonColorsOption","colors","themeNames","forEach","name","idx","size","data","target","slice","setPlot","cur","lineColor","plot","checkAnchorPieSeriesOption","alias","_d","_e","_f","_g","_h","_j","hasOuterAnchor","dataLabels","anchor","hasOuterAnchorPieSeriesName","pieSeriesName","getTheme","pieSeriesOuterAnchors","globalFontFamily","heatmap","state","action","initThemeState","initStoreState","observe","updateTheme","dispatch"],"mappings":"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","sourcesContent":["import { deepMergedCopy, omit } from \"../helpers/utils\";\nimport { getNestedPieChartAliasNames, hasNestedPieSeries, hasOuterDataLabel, hasOuterPieSeriesName, } from \"../helpers/pieSeries\";\nimport { makeAxisTitleTheme, defaultSeriesTheme, getDefaultTheme } from \"../helpers/theme\";\nfunction getCommonSeriesOptions(options, series, isNestedPieChart) {\n    var _a, _b;\n    const theme = (_a = options) === null || _a === void 0 ? void 0 : _a.theme;\n    if (!((_b = theme) === null || _b === void 0 ? void 0 : _b.series)) {\n        return {};\n    }\n    const seriesNames = isNestedPieChart ? getNestedPieChartAliasNames(series) : Object.keys(series);\n    return seriesNames.reduce((acc, seriesName) => {\n        delete acc[seriesName];\n        return acc;\n    }, Object.assign({}, theme.series));\n}\nfunction getThemeAppliedSecondaryYAxis(options) {\n    var _a, _b, _c;\n    const theme = Object.assign({}, options.theme);\n    if (!Array.isArray(theme.yAxis)) {\n        return theme;\n    }\n    const axisTitleTheme = makeAxisTitleTheme((_c = (_b = (_a = options) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.chart) === null || _c === void 0 ? void 0 : _c.fontFamily);\n    const yAxis = theme.yAxis.map((yAxisTheme) => deepMergedCopy({ title: Object.assign({}, axisTitleTheme) }, Object.assign({}, yAxisTheme)));\n    return Object.assign(Object.assign({}, theme), { yAxis });\n}\nfunction getThemeOptionsWithSeriesName(options, series, commonSeriesOptions, isNestedPieChart) {\n    var _a;\n    const theme = getThemeAppliedSecondaryYAxis(options);\n    if (!((_a = theme) === null || _a === void 0 ? void 0 : _a.series)) {\n        return Object.assign({}, theme);\n    }\n    const seriesTheme = Object.assign(Object.assign({}, theme), { series: {} });\n    const seriesNames = Object.keys(series);\n    const isComboChart = seriesNames.length > 1;\n    if (isNestedPieChart) {\n        const aliasNames = getNestedPieChartAliasNames(series);\n        seriesTheme.series = {\n            pie: aliasNames.reduce((acc, aliasName) => {\n                var _a;\n                return (Object.assign(Object.assign({}, acc), { [aliasName]: deepMergedCopy((_a = theme.series) === null || _a === void 0 ? void 0 : _a[aliasName], omit(commonSeriesOptions, 'colors')) }));\n            }, {}),\n        };\n    }\n    else if (isComboChart) {\n        seriesTheme.series = Object.assign({}, seriesNames.reduce((acc, seriesName) => {\n            var _a;\n            return (Object.assign(Object.assign({}, acc), { [seriesName]: deepMergedCopy((_a = theme.series) === null || _a === void 0 ? void 0 : _a[seriesName], omit(commonSeriesOptions, 'colors')) }));\n        }, {}));\n    }\n    else {\n        seriesTheme.series = {\n            [seriesNames[0]]: theme.series,\n        };\n    }\n    return seriesTheme;\n}\nfunction setColors(theme, series, commonSeriesOptions, isNestedPieChart) {\n    var _a, _b;\n    let index = 0;\n    const commonColorsOption = [\n        ...(_b = (_a = commonSeriesOptions) === null || _a === void 0 ? void 0 : _a.colors, (_b !== null && _b !== void 0 ? _b : [])),\n        ...defaultSeriesTheme.colors,\n    ];\n    const themeNames = isNestedPieChart ? getNestedPieChartAliasNames(series) : Object.keys(series);\n    themeNames.forEach((name, idx) => {\n        var _a;\n        const size = isNestedPieChart\n            ? series.pie[idx].data.length\n            : series[name].length;\n        const target = isNestedPieChart ? theme.series.pie : theme.series;\n        if (!((_a = target[name]) === null || _a === void 0 ? void 0 : _a.colors)) {\n            target[name] = Object.assign(Object.assign({}, target[name]), { colors: commonColorsOption.slice(index, index + size) });\n            index += size;\n        }\n    });\n}\nfunction setPlot(theme) {\n    ['vertical', 'horizontal'].reduce((acc, cur) => {\n        if (!acc[cur]) {\n            acc[cur] = { lineColor: acc.lineColor };\n        }\n        return acc;\n    }, theme.plot);\n}\nfunction checkAnchorPieSeriesOption(options, series, alias) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    return {\n        hasOuterAnchor: !!series.pie && ((_d = (_c = (_b = (_a = options) === null || _a === void 0 ? void 0 : _a.series) === null || _b === void 0 ? void 0 : _b[alias]) === null || _c === void 0 ? void 0 : _c.dataLabels) === null || _d === void 0 ? void 0 : _d.anchor) === 'outer',\n        hasOuterAnchorPieSeriesName: !!series.pie && ((_j = (_h = (_g = (_f = (_e = options) === null || _e === void 0 ? void 0 : _e.series) === null || _f === void 0 ? void 0 : _f[alias]) === null || _g === void 0 ? void 0 : _g.dataLabels) === null || _h === void 0 ? void 0 : _h.pieSeriesName) === null || _j === void 0 ? void 0 : _j.anchor) === 'outer',\n    };\n}\nfunction getTheme(options, series) {\n    var _a, _b, _c;\n    const isNestedPieChart = hasNestedPieSeries(series);\n    const commonSeriesOptions = getCommonSeriesOptions(options, series, isNestedPieChart);\n    let pieSeriesOuterAnchors = {\n        hasOuterAnchor: hasOuterDataLabel(options, series),\n        hasOuterAnchorPieSeriesName: hasOuterPieSeriesName(options, series),\n    };\n    if (isNestedPieChart) {\n        const aliasNames = getNestedPieChartAliasNames(series);\n        pieSeriesOuterAnchors = aliasNames.reduce((acc, cur) => (Object.assign(Object.assign({}, acc), { [cur]: checkAnchorPieSeriesOption(options, series, cur) })), {});\n    }\n    const globalFontFamily = (_c = (_b = (_a = options) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.chart) === null || _c === void 0 ? void 0 : _c.fontFamily;\n    const theme = deepMergedCopy(getDefaultTheme(globalFontFamily, series, pieSeriesOuterAnchors, isNestedPieChart), getThemeOptionsWithSeriesName(options, series, commonSeriesOptions, isNestedPieChart));\n    if (!series.heatmap) {\n        setColors(theme, series, commonSeriesOptions, isNestedPieChart);\n    }\n    setPlot(theme);\n    return theme;\n}\nconst theme = {\n    name: 'theme',\n    state: ({ options, series }) => ({\n        theme: getTheme(options, series),\n    }),\n    action: {\n        initThemeState({ state, initStoreState }) {\n            state.theme = getTheme(state.options, initStoreState.series);\n        },\n    },\n    observe: {\n        updateTheme() {\n            this.dispatch('initThemeState');\n        },\n    },\n};\nexport default theme;\n"]},"metadata":{},"sourceType":"module"}